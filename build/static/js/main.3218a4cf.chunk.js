(this["webpackJsonpcdc-admin"]=this["webpackJsonpcdc-admin"]||[]).push([[0],{21:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(22),i=a.n(n),r=(a(28),a(4)),c=a(5),o=a(12),l=a(7),u=a(6),j=(a(29),a(21),a(15)),h=a(0),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={lista:[],nome:"",email:"",senha:"",page:""},e.AtualizaPagina=e.AtualizaPagina.bind(Object(o.a)(e)),e}return Object(c.a)(a,[{key:"AtualizaPagina",value:function(e){this.setState({page:e})}},{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{id:"menu",children:Object(h.jsxs)("div",{className:"pure-menu",children:[Object(h.jsx)("a",{className:"pure-menu-heading",href:"#company",children:"Company"}),Object(h.jsxs)("ul",{className:"pure-menu-list",children:[Object(h.jsx)("li",{className:"pure-menu-item",children:Object(h.jsx)(j.b,{to:"/",className:"pure-menu-link",children:"Home"})}),Object(h.jsx)("li",{className:"pure-menu-item",children:Object(h.jsx)(j.b,{to:"/autor",className:"pure-menu-link",children:"Autor"})}),Object(h.jsx)("li",{className:"pure-menu-item",children:Object(h.jsx)(j.b,{to:"/livros",className:"pure-menu-link",children:"Livro"})})]})]})})})}}]),a}(s.Component),b=a(14),p=a.n(b),m=a(8),O=a.n(m),v=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={msgErro:""},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"pure-control-group",children:[Object(h.jsx)("label",{htmlFor:this.props.id,children:this.props.label}),Object(h.jsx)("input",{id:this.props.id,type:this.props.type,name:this.props.nome,value:this.props.value,onChange:this.props.onChange,className:this.props.className}),Object(h.jsx)("span",{className:"erro",children:this.state.msgErro})]})}},{key:"componentDidMount",value:function(){O.a.subscribe("erro-validacao",function(e,t){t.field===this.props.name&&this.setState({msgErro:t.defaultMessage})}.bind(this)),O.a.subscribe("limpa-erros",function(e){this.setState({msgErro:""})}.bind(this))}}]),a}(s.Component),x=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"publicaErros",value:function(e){console.log(e);for(var t=0;t<e.errors.length;t++){var a=e.errors[t];O.a.publish("erro-validacao",a)}}}]),e}(),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={nome:"",email:"",senha:""},e.enviaForm=e.enviaForm.bind(Object(o.a)(e)),e}return Object(c.a)(a,[{key:"enviaForm",value:function(e){e.preventDefault(),p.a.ajax({url:"http://cdc-react.herokuapp.com/api/autores",contentType:"application/json",dataType:"json",type:"post",data:JSON.stringify({nome:this.state.nome,email:this.state.email,senha:this.state.senha}),success:function(e){O.a.publish("atualiza-lista-autores",e),this.setState({nome:"",email:"",senha:""})}.bind(this),error:function(e){400===e.status&&(new x).publicaErros(e.responseJSON)},beforeSend:function(){O.a.publish("limpa-erros",{})}})}},{key:"salvaAlteracao",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a)}},{key:"render",value:function(){return Object(h.jsx)("div",{className:"pure-form pure-form-aligned",children:Object(h.jsxs)("form",{className:"pure-form pure-form-aligned",onSubmit:this.enviaForm,method:"post",children:[Object(h.jsx)(v,{id:"nome",type:"text",name:"nome",value:this.state.nome,onChange:this.salvaAlteracao.bind(this,"nome"),label:"Nome"}),Object(h.jsx)(v,{id:"email",type:"email",name:"email",value:this.state.email,onChange:this.salvaAlteracao.bind(this,"email"),label:"Email"}),Object(h.jsx)(v,{id:"senha",type:"password",name:"senha",value:this.state.senha,onChange:this.salvaAlteracao.bind(this,"senha"),label:"Senha"}),Object(h.jsxs)("div",{className:"pure-control-group",children:[Object(h.jsx)("label",{}),Object(h.jsx)("button",{type:"submit",className:"pure-button pure-button-primary",children:"Gravar"})]})]})})}}]),a}(s.Component),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsxs)("table",{className:"pure-table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Nome"}),Object(h.jsx)("th",{children:"email"})]})}),Object(h.jsx)("tbody",{children:this.props.lista.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.nome}),Object(h.jsx)("td",{children:e.email})]},e.id)}))})]})})}}]),a}(s.Component),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={lista:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){p.a.ajax({url:"http://cdc-react.herokuapp.com/api/autores",dataType:"json",success:function(e){console.log(this),this.setState({lista:e})}.bind(this)}),O.a.subscribe("atualiza-lista-autores",function(e,t){this.setState({lista:t})}.bind(this))}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsx)("h1",{children:"Cadastro de Autores"})}),Object(h.jsxs)("div",{className:"content",id:"content",children:[Object(h.jsx)(f,{}),Object(h.jsx)(y,{lista:this.state.lista})]})]})}}]),a}(s.Component),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsx)("h1",{children:"Sistema de cadastro de autores e livros"})}),Object(h.jsx)("div",{className:"content",id:"content",children:Object(h.jsx)("center",{children:Object(h.jsx)("h1",{children:"Bem-vindo"})})})]})}}]),a}(s.Component),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={titulo:"",preco:"",autorId:""},s.setTitulo=s.setTitulo.bind(Object(o.a)(s)),s.setPreco=s.setPreco.bind(Object(o.a)(s)),s.setAutorId=s.setAutorId.bind(Object(o.a)(s)),s.handleLivroSubmit=s.handleLivroSubmit.bind(Object(o.a)(s)),s}return Object(c.a)(a,[{key:"setTitulo",value:function(e){this.setState({titulo:e.target.value})}},{key:"setPreco",value:function(e){this.setState({preco:e.target.value})}},{key:"setAutorId",value:function(e){this.setState({autorId:e.target.value})}},{key:"handleLivroSubmit",value:function(e){e.preventDefault();var t=this.state.titulo.trim(),a=this.state.preco.trim(),s=this.state.autorId;p.a.ajax({url:"https://cdc-react.herokuapp.com/api/livros",contentType:"application/json",dataType:"json",type:"POST",data:JSON.stringify({titulo:t,preco:a,autorId:s}),success:function(e){O.a.publish("atualiza-lista-livros",e),this.setState({titulo:"",preco:"",autorId:""})},error:function(e){400===e.status&&(new x).publicaErros(e.responseJSON)},beforeSend:function(){O.a.publish("limpa-erros",{})}}),this.setState({titulo:"",preco:"",autorId:""})}},{key:"render",value:function(){var e=this.props.autores.map((function(e){return Object(h.jsx)("option",{value:e.id,children:e.nome},e.id)}));return Object(h.jsx)("div",{className:"autorForm",children:Object(h.jsxs)("form",{className:"pure-form pure-form-aligned",onSubmit:this.handleLivroSubmit,children:[Object(h.jsx)(v,{id:"titulo",name:"titulo",label:"Titulo: ",type:"text",value:this.state.titulo,placeholder:"Titulo do livro",onChange:this.setTitulo}),Object(h.jsx)(v,{id:"preco",name:"preco",label:"Preco: ",type:"decimal",value:this.state.preco,placeholder:"Pre\xe7o do livro",onChange:this.setPreco}),Object(h.jsx)("div",{className:"pure-controls",children:Object(h.jsxs)("select",{value:this.state.autorId,name:"autorId",onChange:this.setAutorId,children:[Object(h.jsx)("option",{value:"",children:"Selecione"}),e]})}),Object(h.jsxs)("div",{className:"pure-control-group",children:[Object(h.jsx)("label",{}),Object(h.jsx)("button",{type:"submit",className:"pure-button pure-button-primary",children:"Gravar"})]})]})})}}]),a}(s.Component),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.lista.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.titulo}),Object(h.jsx)("td",{children:e.autor.nome}),Object(h.jsx)("td",{children:e.preco})]},e.id)}));return Object(h.jsxs)("table",{className:"pure-table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Titulo"}),Object(h.jsx)("th",{children:"Autor"}),Object(h.jsx)("th",{children:"Preco"})]})}),Object(h.jsx)("tbody",{children:e})]})}}]),a}(s.Component),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={lista:[],autores:[]},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){p.a.ajax({url:"https://cdc-react.herokuapp.com/api/livros",dataType:"json",success:function(e){this.setState({lista:e})}.bind(this)}),p.a.ajax({url:"https://cdc-react.herokuapp.com/api/autores",dataType:"json",success:function(e){console.log(e),this.setState({autores:e})}.bind(this)}),O.a.subscribe("atualiza-lista-livros",function(e,t){this.setState({lista:t})}.bind(this))}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsx)("h1",{children:"Cadastro de Livros"})}),Object(h.jsxs)("div",{className:"content",id:"content",children:[Object(h.jsx)(S,{autores:this.state.autores}),Object(h.jsx)(k,{lista:this.state.lista})]})]})}}]),a}(s.Component),T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),i(e),r(e)}))},A=a(2);i.a.render(Object(h.jsxs)(j.a,{children:[Object(h.jsx)(d,{}),Object(h.jsx)("div",{id:"main",children:Object(h.jsxs)(A.c,{children:[Object(h.jsx)(A.a,{exact:!0,path:"/",component:N}),Object(h.jsx)(A.a,{path:"/autor",component:g}),Object(h.jsx)(A.a,{path:"/livros",component:C})]})})]}),document.getElementById("root")),T()}},[[40,1,2]]]);
//# sourceMappingURL=main.3218a4cf.chunk.js.map