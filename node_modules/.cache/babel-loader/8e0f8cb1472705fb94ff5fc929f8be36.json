{"ast":null,"code":"import _classCallCheck from\"/home/joaohgs/Documents/ProjetosReact/cdc-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/joaohgs/Documents/ProjetosReact/cdc-admin/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/joaohgs/Documents/ProjetosReact/cdc-admin/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/joaohgs/Documents/ProjetosReact/cdc-admin/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/joaohgs/Documents/ProjetosReact/cdc-admin/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import $ from'jquery';import InputCustomizado from'./InputCustomizado';import PubSub from'pubsub-js';import TratadorErros from\"./TratadorErros\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FormularioAutor=/*#__PURE__*/function(_Component){_inherits(FormularioAutor,_Component);var _super=_createSuper(FormularioAutor);function FormularioAutor(){var _this;_classCallCheck(this,FormularioAutor);_this=_super.call(this);_this.state={nome:'',email:'',senha:''};_this.enviaForm=_this.enviaForm.bind(_assertThisInitialized(_this));return _this;}_createClass(FormularioAutor,[{key:\"enviaForm\",value:function enviaForm(evento){evento.preventDefault();$.ajax({url:'http://cdc-react.herokuapp.com/api/autores',contentType:'application/json',dataType:'json',type:'post',data:JSON.stringify({nome:this.state.nome,email:this.state.email,senha:this.state.senha}),success:function(novaListagem){PubSub.publish('atualiza-lista-autores',novaListagem);this.setState({nome:'',email:'',senha:''});}.bind(this),error:function error(resposta){if(resposta.status===400){new TratadorErros().publicaErros(resposta.responseJSON);}},beforeSend:function beforeSend(){PubSub.publish(\"limpa-erros\",{});}});}},{key:\"salvaAlteracao\",value:function salvaAlteracao(nomeInput,evento){var campoSendoAlterado={};campoSendoAlterado[nomeInput]=evento.target.value;this.setState(campoSendoAlterado);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"pure-form pure-form-aligned\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"pure-form pure-form-aligned\",onSubmit:this.enviaForm,method:\"post\",children:[/*#__PURE__*/_jsx(InputCustomizado,{id:\"nome\",type:\"text\",name:\"nome\",value:this.state.nome,onChange:this.salvaAlteracao.bind(this,'nome'),label:\"Nome\"}),/*#__PURE__*/_jsx(InputCustomizado,{id:\"email\",type:\"email\",name:\"email\",value:this.state.email,onChange:this.salvaAlteracao.bind(this,'email'),label:\"Email\"}),/*#__PURE__*/_jsx(InputCustomizado,{id:\"senha\",type:\"password\",name:\"senha\",value:this.state.senha,onChange:this.salvaAlteracao.bind(this,'senha'),label:\"Senha\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pure-control-group\",children:[/*#__PURE__*/_jsx(\"label\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"pure-button pure-button-primary\",children:\"Gravar\"})]})]})});}}]);return FormularioAutor;}(Component);var TabelaAutores=/*#__PURE__*/function(_Component2){_inherits(TabelaAutores,_Component2);var _super2=_createSuper(TabelaAutores);function TabelaAutores(){_classCallCheck(this,TabelaAutores);return _super2.apply(this,arguments);}_createClass(TabelaAutores,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"pure-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"th\",{children:\"email\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.props.lista.map(function(autor){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:autor.nome}),/*#__PURE__*/_jsx(\"td\",{children:autor.email})]},autor.id);})})]})});}}]);return TabelaAutores;}(Component);var AutorBox=/*#__PURE__*/function(_Component3){_inherits(AutorBox,_Component3);var _super3=_createSuper(AutorBox);function AutorBox(){var _this2;_classCallCheck(this,AutorBox);_this2=_super3.call(this);_this2.state={lista:[]};return _this2;}_createClass(AutorBox,[{key:\"componentDidMount\",value:function componentDidMount(){$.ajax({url:\"http://cdc-react.herokuapp.com/api/autores\",dataType:'json',success:function(resposta){console.log(this);this.setState({lista:resposta});}.bind(this)});PubSub.subscribe('atualiza-lista-autores',function(topico,novaLista){this.setState({lista:novaLista});}.bind(this));}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Cadastro de Autores\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",id:\"content\",children:[/*#__PURE__*/_jsx(FormularioAutor,{}),/*#__PURE__*/_jsx(TabelaAutores,{lista:this.state.lista})]})]});}}]);return AutorBox;}(Component);export{AutorBox as default};","map":{"version":3,"sources":["/home/joaohgs/Documents/ProjetosReact/cdc-admin/src/components/Autores.js"],"names":["React","Component","$","InputCustomizado","PubSub","TratadorErros","FormularioAutor","state","nome","email","senha","enviaForm","bind","evento","preventDefault","ajax","url","contentType","dataType","type","data","JSON","stringify","success","novaListagem","publish","setState","error","resposta","status","publicaErros","responseJSON","beforeSend","nomeInput","campoSendoAlterado","target","value","salvaAlteracao","TabelaAutores","props","lista","map","autor","id","AutorBox","console","log","subscribe","topico","novaLista"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport $ from 'jquery';\nimport InputCustomizado from './InputCustomizado';\nimport PubSub from 'pubsub-js';\nimport TratadorErros from \"./TratadorErros\";\n\n\nclass FormularioAutor extends Component {\n\n  constructor() {\n    super();    \n    this.state = {nome:'',email:'',senha:''};\n    this.enviaForm = this.enviaForm.bind(this);\n  }\n\n  enviaForm(evento){\n    evento.preventDefault();    \n    $.ajax({\n      url:'http://cdc-react.herokuapp.com/api/autores',\n      contentType:'application/json',\n      dataType:'json',\n      type:'post',\n      data: JSON.stringify({nome:this.state.nome,email:this.state.email,senha:this.state.senha}),\n      success: function(novaListagem){\n        PubSub.publish('atualiza-lista-autores',novaListagem);        \n        this.setState({nome:'',email:'',senha:''});\n      }.bind(this),\n      error: function(resposta){\n        if(resposta.status === 400) {\n          new TratadorErros().publicaErros(resposta.responseJSON);\n        }\n      },\n      beforeSend: function(){\n        PubSub.publish(\"limpa-erros\",{});\n      }      \n    });\n  }\n\n  salvaAlteracao(nomeInput,evento){\n    var campoSendoAlterado = {};\n    campoSendoAlterado[nomeInput] = evento.target.value;    \n    this.setState(campoSendoAlterado);   \n  }\n\n    render() {\n        return (\n            <div className=\"pure-form pure-form-aligned\">\n              <form className=\"pure-form pure-form-aligned\" onSubmit={this.enviaForm} method=\"post\">\n                <InputCustomizado id=\"nome\" type=\"text\" name=\"nome\" value={this.state.nome} onChange={this.salvaAlteracao.bind(this,'nome')} label=\"Nome\"/>                                              \n                <InputCustomizado id=\"email\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.salvaAlteracao.bind(this,'email')} label=\"Email\"/>                                              \n                <InputCustomizado id=\"senha\" type=\"password\" name=\"senha\" value={this.state.senha} onChange={this.salvaAlteracao.bind(this,'senha')} label=\"Senha\"/>                                                                      \n                <div className=\"pure-control-group\">                                  \n                  <label></label> \n                  <button type=\"submit\" className=\"pure-button pure-button-primary\">Gravar</button>                                    \n                </div>\n              </form>             \n\n            </div>  \n\n        );\n    }\n}\n\nclass TabelaAutores extends Component {\n\n      render() {\n          return(\n            <div>\n            <table className=\"pure-table\">\n              <thead>\n                <tr>\n                  <th>Nome</th>\n                  <th>email</th>\n                </tr>\n              </thead>\n                <tbody>\n                        {\n                        this.props.lista.map(function(autor){\n                            return (\n                            <tr key={autor.id}>\n                                <td>{autor.nome}</td>\n                                <td>{autor.email}</td>\n                            </tr>\n                            );\n                        })\n                        }\n                </tbody>\n            </table> \n          </div>  \n          );\n      }\n}\n\nexport default class AutorBox extends Component {\n    constructor(){\n        super();\n        this.state = {lista : []};  \n    }\n\n    componentDidMount(){\n        $.ajax({\n          url:\"http://cdc-react.herokuapp.com/api/autores\",\n          dataType: 'json',\n          success:function(resposta){\n            console.log(this);\n            this.setState({lista:resposta});\n          }.bind(this)\n        });\n\n        PubSub.subscribe('atualiza-lista-autores', function(topico, novaLista){\n          this.setState({lista:novaLista});\n        }.bind(this));\n    }\n\n    render(){\n        return(\n            <>\n            <div className=\"header\">\n                <h1>Cadastro de Autores</h1>\n          </div>\n          <div className=\"content\" id=\"content\">\n            <FormularioAutor/>\n            \n            <TabelaAutores lista={this.state.lista}/>\n            </div>\n            </>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}