{"ast":null,"code":"var _jsxFileName = \"/home/joaohgs/Documents/ProjetosReact/cdc-admin/src/components/Autores.js\";\nimport React, { Component } from \"react\";\nimport $ from 'jquery';\nimport InputCustomizado from './InputCustomizado';\nimport PubSub from 'pubsub-js';\nimport TratadorErros from \"./TratadorErros\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass FormularioAutor extends Component {\n  constructor() {\n    super();\n    this.state = {\n      nome: '',\n      email: '',\n      senha: ''\n    };\n    this.enviaForm = this.enviaForm.bind(this);\n  }\n\n  enviaForm(evento) {\n    evento.preventDefault();\n    $.ajax({\n      url: 'http://localhost:8080/api/autores',\n      contentType: 'application/json',\n      dataType: 'json',\n      type: 'post',\n      data: JSON.stringify({\n        nome: this.state.nome,\n        email: this.state.email,\n        senha: this.state.senha\n      }),\n      success: function (novaListagem) {\n        PubSub.publish('atualiza-lista-autores', novaListagem);\n        this.setState({\n          nome: '',\n          email: '',\n          senha: ''\n        });\n      }.bind(this),\n      error: function (resposta) {\n        if (resposta.status === 400) {\n          new TratadorErros().publicaErros(resposta.responseJSON);\n        }\n      },\n      beforeSend: function () {\n        PubSub.publish(\"limpa-erros\", {});\n      }\n    });\n  }\n\n  salvaAlteracao(nomeInput, evento) {\n    var campoSendoAlterado = {};\n    campoSendoAlterado[nomeInput] = evento.target.value;\n    this.setState(campoSendoAlterado);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pure-form pure-form-aligned\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"pure-form pure-form-aligned\",\n        onSubmit: this.enviaForm,\n        method: \"post\",\n        children: [/*#__PURE__*/_jsxDEV(InputCustomizado, {\n          id: \"nome\",\n          type: \"text\",\n          name: \"nome\",\n          value: this.state.nome,\n          onChange: this.salvaAlteracao.bind(this, 'nome'),\n          label: \"Nome\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(InputCustomizado, {\n          id: \"email\",\n          type: \"email\",\n          name: \"email\",\n          value: this.state.email,\n          onChange: this.salvaAlteracao.bind(this, 'email'),\n          label: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(InputCustomizado, {\n          id: \"senha\",\n          type: \"password\",\n          name: \"senha\",\n          value: this.state.senha,\n          onChange: this.salvaAlteracao.bind(this, 'senha'),\n          label: \"Senha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pure-control-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"pure-button pure-button-primary\",\n            children: \"Gravar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass TabelaAutores extends Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"pure-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nome\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.props.lista.map(function (autor) {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: autor.nome\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: autor.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 33\n              }, this)]\n            }, autor.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default class AutorBox extends Component {\n  constructor() {\n    super();\n    this.state = {\n      lista: []\n    };\n  }\n\n  componentDidMount() {\n    $.ajax({\n      url: \"http://cdc-react.herokuapp.com/api/autores\",\n      dataType: 'json',\n      success: function (resposta) {\n        console.log(this);\n        this.setState({\n          lista: resposta\n        });\n      }.bind(this)\n    });\n    PubSub.subscribe('atualiza-lista-autores', function (topico, novaLista) {\n      this.setState({\n        lista: novaLista\n      });\n    }.bind(this));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Cadastro de Autores\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        id: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(FormularioAutor, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TabelaAutores, {\n          lista: this.state.lista\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["/home/joaohgs/Documents/ProjetosReact/cdc-admin/src/components/Autores.js"],"names":["React","Component","$","InputCustomizado","PubSub","TratadorErros","FormularioAutor","constructor","state","nome","email","senha","enviaForm","bind","evento","preventDefault","ajax","url","contentType","dataType","type","data","JSON","stringify","success","novaListagem","publish","setState","error","resposta","status","publicaErros","responseJSON","beforeSend","salvaAlteracao","nomeInput","campoSendoAlterado","target","value","render","TabelaAutores","props","lista","map","autor","id","AutorBox","componentDidMount","console","log","subscribe","topico","novaLista"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport $ from 'jquery';\nimport InputCustomizado from './InputCustomizado';\nimport PubSub from 'pubsub-js';\nimport TratadorErros from \"./TratadorErros\";\n\n\nclass FormularioAutor extends Component {\n\n  constructor() {\n    super();    \n    this.state = {nome:'',email:'',senha:''};\n    this.enviaForm = this.enviaForm.bind(this);\n  }\n\n  enviaForm(evento){\n    evento.preventDefault();    \n    $.ajax({\n      url:'http://localhost:8080/api/autores',\n      contentType:'application/json',\n      dataType:'json',\n      type:'post',\n      data: JSON.stringify({nome:this.state.nome,email:this.state.email,senha:this.state.senha}),\n      success: function(novaListagem){\n        PubSub.publish('atualiza-lista-autores',novaListagem);        \n        this.setState({nome:'',email:'',senha:''});\n      }.bind(this),\n      error: function(resposta){\n        if(resposta.status === 400) {\n          new TratadorErros().publicaErros(resposta.responseJSON);\n        }\n      },\n      beforeSend: function(){\n        PubSub.publish(\"limpa-erros\",{});\n      }      \n    });\n  }\n\n  salvaAlteracao(nomeInput,evento){\n    var campoSendoAlterado = {};\n    campoSendoAlterado[nomeInput] = evento.target.value;    \n    this.setState(campoSendoAlterado);   \n  }\n\n    render() {\n        return (\n            <div className=\"pure-form pure-form-aligned\">\n              <form className=\"pure-form pure-form-aligned\" onSubmit={this.enviaForm} method=\"post\">\n                <InputCustomizado id=\"nome\" type=\"text\" name=\"nome\" value={this.state.nome} onChange={this.salvaAlteracao.bind(this,'nome')} label=\"Nome\"/>                                              \n                <InputCustomizado id=\"email\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.salvaAlteracao.bind(this,'email')} label=\"Email\"/>                                              \n                <InputCustomizado id=\"senha\" type=\"password\" name=\"senha\" value={this.state.senha} onChange={this.salvaAlteracao.bind(this,'senha')} label=\"Senha\"/>                                                                      \n                <div className=\"pure-control-group\">                                  \n                  <label></label> \n                  <button type=\"submit\" className=\"pure-button pure-button-primary\">Gravar</button>                                    \n                </div>\n              </form>             \n\n            </div>  \n\n        );\n    }\n}\n\nclass TabelaAutores extends Component {\n\n      render() {\n          return(\n            <div>\n            <table className=\"pure-table\">\n              <thead>\n                <tr>\n                  <th>Nome</th>\n                  <th>email</th>\n                </tr>\n              </thead>\n                <tbody>\n                        {\n                        this.props.lista.map(function(autor){\n                            return (\n                            <tr key={autor.id}>\n                                <td>{autor.nome}</td>\n                                <td>{autor.email}</td>\n                            </tr>\n                            );\n                        })\n                        }\n                </tbody>\n            </table> \n          </div>  \n          );\n      }\n}\n\nexport default class AutorBox extends Component {\n    constructor(){\n        super();\n        this.state = {lista : []};  \n    }\n\n    componentDidMount(){\n        $.ajax({\n          url:\"http://cdc-react.herokuapp.com/api/autores\",\n          dataType: 'json',\n          success:function(resposta){\n            console.log(this);\n            this.setState({lista:resposta});\n          }.bind(this)\n        });\n\n        PubSub.subscribe('atualiza-lista-autores', function(topico, novaLista){\n          this.setState({lista:novaLista});\n        }.bind(this));\n    }\n\n    render(){\n        return(\n            <>\n            <div className=\"header\">\n                <h1>Cadastro de Autores</h1>\n          </div>\n          <div className=\"content\" id=\"content\">\n            <FormularioAutor/>\n            \n            <TabelaAutores lista={this.state.lista}/>\n            </div>\n            </>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}